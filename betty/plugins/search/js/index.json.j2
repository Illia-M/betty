{% import 'macro/person.html.j2' as personMacros %}
{% import 'macro/place.html.j2' as placeMacros %}
{% set ns = namespace(resources=[]) %}
{% for person in site.ancestry.people.values() %}
    {% if not person.private %}
        {% set _ = ns.resources.append({
            'text': [person.family_name, person.individual_name] | join(' '),
            'label': personMacros.label(person) | striptags,
            'url': person | url,
        }) %}
    {% endif %}
{% endfor %}
{% for place in site.ancestry.places.values() %}
    {% set _ = ns.resources.append({
        'text': place.name,
        'label': placeMacros.label(place) | striptags,
        'url': place | url,
    }) %}
{% endfor %}
{{ ns.resources | json }}
